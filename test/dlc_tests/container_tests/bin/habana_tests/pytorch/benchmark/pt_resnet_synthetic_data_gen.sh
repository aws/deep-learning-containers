#!/bin/bash

########################################################################################
# synthetic dataset generator for resnet
# It uses convert tool from ImageMagick package
# centos: sudo yum install ImageMagick
# ubuntu: sudo apt install imagemagick
# usage:
# resnet_synthetic_dataset_generator.sh \
# -d <outdir> \  # default resnet_synthetic_dataset
# -n <number of classes> \  # default 1000
# -v <validation dataset count> \  # default 50
# -t <training dataset count>  # default 1300
########################################################################################


# array containing list image density & resolutions randomly selected for generating images
train_imageinfo=(72x72,500x333 180x180,383x500 72x72,180x240 72x72,500x375 72x72,382x320 \
                 300x300,500x332 1x1,332x500 72x72,500x333 72x72,500x375 72x72,500x375 \
                 72x72,500x375 72x72,438x500 180x180,250x227 72x72,500x333 72x72,500x375 \
                 72x72,500x333 72x72,500x375 72x72,500x375 72x72,500x375 72x72,500x375 \
                 72x72,240x240 72x72,240x214 96x96,500x399 96x96,375x330 72x72,500x341 \
                 72x72,281x360 72x72,500x375 100x100,240x180 72x72,500x375 96x96,500x375 \
                 72x72,500x375 72x72,446x500 72x72,500x375 72x72,500x333 300x300,240x180 \
                 72x72,500x320 72x72,500x375 72x72,500x333 72x72,500x375 72x72,375x500 \
                 72x72,500x375 100x100,500x398 72x72,500x375 72x72,500x348 72x72,500x333 \
                 300x300,500x434 72x72,333x345 1x1,310x500 72x72,500x338 72x72,500x375 \
                 72x72,396x500 200x200,344x500 72x72,500x375 72x72,320x250 72x72,500x375 \
                 260x260,365x500 72x72,500x375 150x150,360x297 72x72,240x180 96x96,500x427 \
                 72x72,500x375 72x72,404x500 72x72,500x336 180x180,399x500 72x72,500x375 \
                 300x300,240x235 72x72,500x332 72x72,500x375 72x72,500x375 72x72,500x375 \
                 72x72,413x500 72x72,500x322 72x72,500x334 72x72,500x333 1x1,500x375 \
                 180x180,500x375 72x72,357x500 72x72,333x500 300x300,261x398 180x180,400x289 \
                 72x72,333x500 72x72,800x600 72x72,500x297 72x72,500x375 96x96,431x500 \
                 1x1,500x487 72x72,375x500 180x180,500x401 72x72,400x210 72x72,500x352 \
                 72x72,500x375 72x72,500x375 96x96,211x500 72x72,240x180 72x72,500x375 \
                 72x72,500x375 72x72,500x375 100x100,222x205 72x72,500x375 100x100,336x504 \
                 72x72,500x358 100x100,196x251 1x1,375x500 72x72,500x375 800x800,300x412 \
                 96x96,278x400 72x72,375x500 100x100,400x431 72x72,333x500 72x72,348x500 \
                 96x96,500x240 300x300,500x379 72x72,240x180 100x100,445x500 72x72,500x375 \
                 72x72,180x240 72x72,360x270 72x72,500x374 72x72,500x375 1x1,500x375 \
                 96x96,350x341 72x72,500x357 72x72,500x375 72x72,240x198 72x72,334x500 \
                 1x1,500x375 72x72,615x461 72x72,375x500 72x72,333x500 72x72,500x375 \
                 300x300,500x292 72x72,240x180 72x72,500x333 72x72,500x375 72x72,500x375 \
                 72x72,500x375 96x96,333x500 72x72,500x375 72x72,500x400 1x1,500x375 \
                 72x72,314x235 100x100,263x348 72x72,333x500 100x100,216x325 180x180,500x281 \
                 1x1,333x500 72x72,500x295 72x72,500x375 72x72,352x500 300x300,500x407 \
                 72x72,375x500 72x72,500x349 100x100,250x250 72x72,500x375 72x72,180x240 \
                 96x96,500x497 72x72,500x375 100x100,250x335 72x72,500x281 72x72,500x375 \
                 72x72,500x333 72x72,240x180 72x72,375x500 72x72,464x500 72x72,500x500 \
                 72x72,339x500 72x72,375x500 96x96,500x410 72x72,500x375 72x72,236x213 \
                 72x72,500x419 72x72,500x495 72x72,226x273 96x96,438x302 72x72,358x500 \
                 72x72,500x375 150x150,212x240 72x72,500x375 72x72,500x375 72x72,500x461 \
                 500x500,388x500 72x72,320x231 72x72,500x375 72x72,500x375 240x240,500x335 \
                 96x96,240x180 72x72,360x270 72x72,500x334 96x96,400x338 72x72,500x375 \
                 96x96,500x297 300x300,500x417 72x72,500x326 72x72,500x375 72x72,446x500 \
                 72x72,500x375 96x96,364x253 300x300,714x805 96x96,640x480 72x72,240x216 \
                 72x72,500x375 150x150,500x375 72x72,500x375 72x72,500x411 180x180,500x476 \
                 72x72,371x500 100x100,250x250 100x100,365x245 180x180,375x500 72x72,500x375 \
                 1x1,360x270 72x72,333x500 1x1,493x500 1x1,414x500 72x72,500x375 \
                 72x72,500x333 300x300,196x300 1x1,375x500 72x72,500x334 1x1,333x500 \
                 96x96,333x500 72x72,500x375 216x216,576x432 72x72,500x424 72x72,314x400 \
                 72x72,500x375 96x96,500x333 72x72,400x400 72x72,500x375 180x180,500x368 \
                 1x1,314x284 100x100,200x142 72x72,500x500 72x72,500x375 72x72,500x375 \
                 72x72,360x270 72x72,375x500 72x72,240x199 72x72,319x500 72x72,500x375 \
                 300x300,700x448 300x300,375x281 72x72,500x375 100x100,177x333 72x72,500x381 \
                 180x180,500x333 400x400,322x250 180x180,500x375 72x72,500x375 72x72,304x500 \
                 72x72,500x167 72x72,500x375 72x72,500x375 72x72,500x333 72x72,500x374 \
                 72x72,500x375 72x72,318x250 72x72,375x500 1x1,500x445 180x180,450x409 \
                 72x72,300x200 72x72,500x375 300x300,407x272 75x75,244x295 1x1,226x314 \
                 100x100,309x223 1x1,500x375 300x300,253x380 72x72,375x500 72x72,400x320 \
                 100x100,700x700 72x72,333x500 72x72,250x187 180x180,500x456 100x100,500x297 \
                 100x100,400x354 100x100,370x278 72x72,276x362 72x72,378x500 300x300,450x277 \
                 72x72,194x260 1x1,350x344 72x72,500x375 72x72,500x471 96x96,499x500 \
                 100x100,225x231 72x72,471x500 400x400,269x400 72x72,331x500 96x96,350x368 \
                 300x300,306x222 72x72,500x375 72x72,314x448 1x1,500x375 72x72,500x375 \
                 150x150,320x353 100x100,267x235 72x72,500x375 1x1,500x375 180x180,1022x717 \
                 100x100,500x332 72x72,333x500 1x1,500x375 72x72,500x375 180x180,500x365 \
                 72x72,400x300 72x72,500x375 72x72,500x333 72x72,500x375 400x400,300x427 \
                 600x600,228x240 72x72,500x375 72x72,500x480 96x96,421x500 72x72,500x375 \
                 72x72,500x375 72x72,500x359 72x72,500x375 72x72,500x375 300x300,1600x1200 \
                 72x72,500x375 72x72,500x333 72x72,426x380 150x150,808x629 72x72,500x333 \
                 72x72,500x375 72x72,500x333 300x300,400x500 96x96,358x512 72x72,757x671 \
                 72x72,500x333 72x72,320x212 180x180,375x500 1x1,500x375 72x72,500x375 \
                 72x72,500x375 72x72,375x500 72x72,500x364 72x72,240x187 150x150,450x459 \
                 72x72,500x375 72x72,500x346 72x72,334x500 72x72,366x500 72x72,333x500 \
                 72x72,500x486 72x72,500x375 72x72,500x359 100x100,500x331 72x72,500x333 \
                 72x72,500x375 72x72,300x274 72x72,500x375 150x150,640x480 72x72,500x375 \
                 72x72,500x357 192x192,500x375 72x72,500x375 72x72,360x436 72x72,500x375 \
                 150x150,252x360 1x1,500x375 96x96,340x450 180x180,500x333 72x72,500x375 \
                 72x72,500x375 180x180,445x500 72x72,333x500 72x72,394x610 72x72,235x318 \
                 72x72,240x180 72x72,396x450 300x300,346x500 72x72,208x240 72x72,500x375 \
                 72x72,500x375 72x72,333x500 72x72,500x344 72x72,500x375 300x300,350x322 \
                 72x72,500x375 72x72,333x500 100x100,400x300 100x100,299x450 72x72,375x500 \
                 72x72,280x201 1x1,500x332 100x100,400x353 150x150,463x402 100x100,300x271 \
                 230x230,273x500 72x72,300x225 72x72,500x333 72x72,240x180 300x300,500x430 \
                 72x72,320x250 72x72,500x375 72x72,500x333 1x1,325x500 144x144,335x254 \
                 72x72,240x180 1x1,473x500 72x72,315x500 1x1,500x375 72x72,483x500 \
                 72x72,500x334 72x72,375x500 72x72,500x375 1x1,500x356 72x72,500x375 \
                 72x72,375x500 1x1,500x375 1x1,385x500 72x72,500x375 72x72,500x333 \
                 72x72,350x255 100x100,322x243 1x1,500x334 72x72,500x375 72x72,500x375 \
                 72x72,695x521 1x1,500x337 72x72,448x500 96x96,350x294 72x72,500x375 \
                 1x1,500x375 1x1,500x395 72x72,500x400 72x72,500x375 1x1,500x375 \
                 72x72,500x375 473x473,352x279 72x72,500x333 72x72,500x375 72x72,500x325 \
                 1x1,500x342 1x1,500x333 72x72,500x375 300x300,400x452 72x72,500x444 \
                 1x1,500x375 1x1,500x375 1x1,500x333 100x100,400x276 100x100,500x334 \
                 72x72,298x500 72x72,425x319 72x72,288x341 1x1,334x500 1x1,500x375 \
                 72x72,500x375 72x72,375x500 1x1,375x500 118x118,300x252 72x72,500x336 \
                 72x72,500x375 72x72,500x375 1x1,500x375 100x100,237x220 29x29,375x500 \
                 180x180,500x497 72x72,390x390 100x100,550x496 1x1,500x336 72x72,500x375 \
                 72x72,500x375 96x96,500x390 72x72,500x375 72x72,375x500 72x72,500x375 \
                 72x72,240x180 72x72,500x375 1x1,500x375 500x500,500x337 72x72,379x413 \
                 96x96,470x500 72x72,500x333 72x72,500x333 72x72,500x375 1x1,500x375 \
                 72x72,100x96 1x1,500x375 72x72,275x250 72x72,250x250 72x72,500x375 \
                 72x72,500x375 100x100,300x245 72x72,270x360 72x72,354x500 1x1,500x333 \
                 72x72,295x197 1x1,500x375 100x100,400x300 72x72,500x375 1x1,322x360 \
                 72x72,202x240 72x72,500x375 72x72,328x500 500x500,333x500 100x100,447x325 \
                 72x72,333x500 72x72,285x300 72x72,500x375 1x1,300x225 72x72,500x375 \
                 100x100,500x335 96x96,500x325 300x300,454x700 300x300,500x332 72x72,375x500 \
                 96x96,232x219 72x72,500x375 72x72,282x323 150x150,375x500 72x72,500x498 \
                 72x72,500x375 0x0,468x429 72x72,500x375 72x72,354x500 72x72,500x375 \
                 1x1,500x375 72x72,336x448 72x72,500x499 72x72,375x500 72x72,500x375 \
                 72x72,500x375 72x72,500x375 96x96,360x480 72x72,500x375 1x1,500x375 \
                 72x72,500x400 72x72,500x375 72x72,408x500 73x73,295x400 1x1,500x358 \
                 131x131,500x375 72x72,447x500 27x27,800x560 72x72,500x375 72x72,500x400 \
                 72x72,332x500 72x72,500x375 131x131,500x375 72x72,375x500 1x1,500x375 \
                 72x72,500x334 300x300,500x333 1x1,399x500 240x240,500x369 100x100,272x375 \
                 72x72,500x375 300x300,317x480 72x72,500x333 72x72,500x375 300x300,500x333 \
                 1x1,500x375 1x1,500x369 1x1,479x360 72x72,375x500 300x300,500x300 \
                 100x100,500x452 72x72,500x375 1x1,243x500 500x500,500x333 72x72,300x237 \
                 1x1,500x333 72x72,500x375 100x100,1024x768 72x72,500x375 72x72,500x375 \
                 72x72,500x375 1x1,500x375 1x1,500x375 72x72,312x250 100x100,210x210 \
                 1x1,500x333 72x72,500x409 72x72,500x375 72x72,400x247 72x72,500x336 \
                 96x96,333x500 100x100,249x296 72x72,500x332 72x72,500x375 100x100,300x197 \
                 72x72,500x375 150x150,275x188 100x100,500x335 72x72,500x375 72x72,401x500 \
                 150x150,350x307 1x1,500x434 72x72,375x500 230x230,500x498 1x1,500x375 \
                 192x192,500x375 300x300,700x455 72x72,403x500 72x72,500x375 72x72,500x375 \
                 72x72,500x330 72x72,480x360 72x72,500x331 100x100,400x356 72x72,500x375 \
                 72x72,200x304 1x1,368x500 72x72,437x290 72x72,500x325 1x1,375x500 \
                 72x72,333x500 72x72,500x375 72x72,500x360 72x72,500x376 1x1,500x334 \
                 72x72,500x453 72x72,389x256 72x72,500x290 72x72,220x173 72x72,500x375 \
                 72x72,500x375 1x1,270x360 72x72,500x375 72x72,375x500 1x1,500x375 \
                 100x100,315x443 1x1,500x375 72x72,500x375 72x72,333x500 72x72,500x375 \
                 72x72,500x492 72x72,500x375 72x72,500x375 150x150,229x200 100x100,600x397 \
                 72x72,500x375 72x72,500x335 72x72,400x389 72x72,500x375 150x150,320x242 \
                 72x72,375x500 180x180,375x500 72x72,500x375 300x300,400x300 180x180,400x352 \
                 1x1,252x336 72x72,375x500 72x72,500x375 72x72,333x500 72x72,500x375 \
                 118x118,1030x856 72x72,375x500 96x96,500x434 72x72,500x333 72x72,333x500 \
                 72x72,333x500 72x72,500x375 100x100,500x492 72x72,375x500 1x1,500x416 \
                 1x1,350x295 72x72,375x500 72x72,640x427 72x72,500x375 37x37,500x363 \
                 72x72,500x367 300x300,640x512 1x1,500x375 72x72,457x500 72x72,500x376 \
                 72x72,350x262 1x1,375x500 72x72,300x300 1x1,500x376 72x72,640x480 \
                 150x150,396x500 72x72,500x375 1x1,500x331 96x96,500x363 100x100,344x424 \
                 72x72,500x375 72x72,500x375 72x72,425x319 72x72,500x375 72x72,500x375 \
                 72x72,300x224 300x300,231x200 72x72,500x375 28x28,290x196 72x72,335x500 \
                 72x72,500x375 1x1,500x400 72x72,500x375 1x1,500x375 96x96,500x376 \
                 131x131,500x375 72x72,500x375 300x300,500x333 1x1,429x500 72x72,500x339 \
                 72x72,500x375 72x72,500x375 72x72,500x375 72x72,800x600 72x72,500x352 \
                 200x200,350x500 72x72,333x500 72x72,317x373 96x96,375x500 72x72,500x375 \
                 72x72,375x500 72x72,500x375 72x72,375x500 72x72,499x373 300x300,300x192 \
                 1x1,398x500 72x72,479x360 1x1,500x500 72x72,500x356 72x72,200x155 \
                 72x72,500x375 180x180,996x800 72x72,500x375 72x72,500x375 200x200,240x226 \
                 72x72,333x500 72x72,500x375 72x72,500x334 72x72,500x375 72x72,375x500 \
                 100x100,360x359 100x100,335x500 72x72,375x500 72x72,500x375 96x96,250x250 \
                 72x72,500x375 72x72,500x375 72x72,320x212 72x72,288x433 72x72,333x500 \
                 72x72,500x333 144x144,405x500 72x72,375x500 72x72,500x375 72x72,500x375 \
                 72x72,500x375 72x72,500x375 96x96,365x500 72x72,500x333 100x100,437x500 \
                 72x72,500x375 72x72,500x375 72x72,700x476 300x300,1112x965 96x96,500x302 \
                 72x72,320x209 72x72,500x366 96x96,386x500 100x100,190x231 72x72,500x334 \
                 72x72,500x375 72x72,500x375 72x72,375x500 300x300,500x373 72x72,500x375 \
                 72x72,500x333 72x72,500x375 180x180,367x500 72x72,500x413 72x72,500x375 \
                 72x72,500x375 72x72,500x375 100x100,500x318 72x72,240x180 72x72,500x375 \
                 72x72,500x375 72x72,500x332 72x72,500x375 72x72,500x333 72x72,500x375 \
                 72x72,500x375 72x72,500x375 72x72,500x375 72x72,500x375 96x96,188x235 \
                 72x72,375x500 72x72,640x431 72x72,375x500 300x300,333x500 72x72,500x375 \
                 100x100,250x340 72x72,348x500 72x72,268x196 1x1,500x375 72x72,500x375 \
                 72x72,195x260 1x1,500x375 180x180,490x500 72x72,500x355 1x1,500x375 \
                 72x72,500x375 72x72,500x333 180x180,500x375 96x96,500x356 100x100,305x360 \
                 72x72,500x331 72x72,500x374 72x72,196x240 100x100,200x166 72x72,253x359 \
                 72x72,500x375 72x72,500x375 72x72,425x500 72x72,500x375 72x72,375x500 \
                 96x96,57x100 1x1,344x500 72x72,366x447 1x1,446x500 72x72,340x500 \
                 150x150,500x321 72x72,375x500 72x72,500x375 1x1,500x375 72x72,399x500 \
                 72x72,500x375 72x72,500x375 1x1,500x333 72x72,500x375 72x72,500x334 \
                 96x96,443x500 72x72,500x389 1x1,500x375 72x72,500x375 72x72,394x295 \
                 1x1,500x464 72x72,480x640 96x96,500x375 72x72,500x375 72x72,500x404 \
                 72x72,333x500 72x72,500x333 100x100,403x500 100x100,500x137 72x72,333x500 \
                 100x100,215x240 96x96,360x270 300x300,331x512 72x72,500x333 1x1,500x375 \
                 72x72,640x480 72x72,500x375 72x72,432x325 72x72,345x500 1x1,375x500 \
                 72x72,500x375 72x72,500x500 72x72,500x375 72x72,500x375 150x150,379x291 \
                 1x1,500x375 100x100,240x240 72x72,184x257 1x1,500x375 72x72,480x360 \
                 72x72,375x500 96x96,500x371 72x72,250x188 72x72,500x375 72x72,500x375 \
                 72x72,500x372 72x72,479x360 1x1,500x375 72x72,500x375 72x72,500x375 \
                 240x240,500x416 300x300,372x500 100x100,375x500 72x72,500x375 100x100,300x247 \
                 180x180,500x375 300x300,501x355 180x180,500x342 1x1,500x375 72x72,359x500 \
                 72x72,500x318 72x72,375x500 72x72,332x500 72x72,500x462 72x72,500x443 \
                 72x72,500x396 300x300,500x276 72x72,266x200 300x300,500x500 300x300,375x500 \
                 72x72,500x375 100x100,320x320 100x100,300x226 200x200,500x378 72x72,302x500 \
                 68x68,320x240 96x96,480x360 400x400,223x320 1x1,416x500 72x72,500x335 \
                 72x72,434x500 100x100,288x300 100x100,200x300 72x72,500x375 72x72,1072x1180 \
                 72x72,500x375 150x150,360x358 72x72,333x500 72x72,500x408 72x72,202x254 \
                 72x72,500x333 72x72,640x480 72x72,500x398 72x72,333x500 96x96,380x500 \
                 1x1,500x375 72x72,444x425 1x1,333x500 20x15,402x317 72x72,500x375 \
                 72x72,500x375 300x300,335x500 72x72,500x375 72x72,387x500 72x72,500x375 \
                 72x72,500x375 72x72,500x375 1x1,500x375 72x72,315x500 72x72,500x333 \
                 72x72,500x375 72x72,500x375 72x72,454x529 1x1,190x205 96x96,276x343 \
                 300x300,300x199 100x100,299x448 72x72,500x375 1x1,500x313 72x72,505x348 \
                 72x72,500x375 100x100,334x500 72x72,500x320 72x72,500x400 1x1,500x375 \
                 300x300,350x301 72x72,400x299 180x180,400x294 100x100,500x293 100x100,360x302 \
                 96x96,500x492 72x72,500x285 72x72,375x500 72x72,450x579 72x72,500x375 \
                 150x150,194x268 72x72,500x375 72x72,500x375 1x1,500x375 1x1,500x375 \
                 1x1,500x333 1x1,500x375 72x72,375x500 100x100,500x331 72x72,500x375 \
                 1x1,500x375 72x72,500x281 500x500,500x338 96x96,364x253 72x72,640x480 \
                 72x72,500x375 240x240,500x334 72x72,186x240 72x72,500x375 96x96,250x187 \
                 180x180,320x240 72x72,500x375 72x72,295x393 75x75,503x384 72x72,500x375 \
                 1x1,500x375 92x92,370x400 72x72,500x375 72x72,98x74 72x72,375x500 \
                 1x1,500x375 1x1,500x348 72x72,333x500 18432x18432,375x500 72x72,500x334 \
                 72x72,500x375 96x96,500x375 72x72,402x480 300x300,500x442 1x1,421x432 \
                 72x72,500x375 72x72,500x375 72x72,500x375 72x72,500x375 72x72,195x260 \
                 72x72,300x199 72x72,500x333 96x96,364x253 72x72,500x375 72x72,500x375 \
                 150x150,320x412 1x1,500x375 72x72,500x375 72x72,500x281 1x1,500x375 \
                 72x72,375x500 72x72,500x375 72x72,500x375 72x72,500x333 72x72,500x375 \
                 72x72,251x384 72x72,400x300 72x72,500x453 72x72,375x500 1x1,463x442 \
                 100x100,320x360 1x1,500x375 72x72,500x375 72x72,500x375 72x72,500x351 \
                 72x72,500x375 100x100,244x183 72x72,500x375 100x100,390x390 72x72,500x375 \
                 1x1,500x375 230x230,640x480 1x1,500x351 72x72,500x333 72x72,375x500 \
                 1x1,500x375 96x96,442x284 150x150,360x270 72x72,375x500 1x1,500x375 \
                 72x72,500x375 72x72,500x375 72x72,500x375 72x72,500x365 1x1,500x375 \
                 72x72,500x207 1x1,500x375 72x72,500x375 300x300,900x600 72x72,270x219 \
                 1x1,375x500 72x72,240x180 72x72,500x308 72x72,500x375 96x96,493x500 \
                 72x72,500x375 72x72,500x375 1x1,500x375 72x72,295x308 100x100,240x180 \
                 72x72,500x375 1x1,500x375 72x72,500x375 300x300,500x333 96x96,333x500 \
                 72x72,500x375 1x1,375x500 72x72,375x500 300x300,250x205 72x72,474x455 \
                 72x72,500x333 1x1,375x500 300x300,500x331 72x72,500x375 72x72,500x375 \
                 1x1,500x334 72x72,375x500 72x72,500x375 1x1,375x500 1x1,500x333 \
                 72x72,500x375 72x72,500x375 1x1,500x375 72x72,400x300 72x72,640x480 \
                 72x72,300x289 72x72,500x375 96x96,450x359 72x72,500x338 250x250,500x401 \
                 72x72,375x500 96x96,500x375 72x72,500x375 72x72,320x212 72x72,400x340 \
                 72x72,375x500 1x1,500x375 1x1,448x500 72x72,500x375 314x314,500x375 \
                 72x72,375x500 240x240,500x337 72x72,500x375 72x72,480x360 72x72,500x375 \
                 100x100,304x201 72x72,500x334 72x72,375x500 180x180,500x429 72x72,300x300 \
                 1x1,300x225 72x72,500x375 72x72,236x236 72x72,500x334 1x1,309x500 \
                 72x72,500x375 72x72,500x375 72x72,333x500 72x72,500x375 72x72,500x374 \
                 72x72,500x375 96x96,321x500 96x96,500x375 72x72,500x375 72x72,180x240 \
                 1x1,688x512 72x72,500x375 72x72,500x314 72x72,425x319 72x72,375x500 \
                 100x100,500x356 300x300,500x326 72x72,333x500 72x72,500x333 72x72,500x375 \
                 150x150,274x360 72x72,500x375 100x100,130x200 1x1,500x375 72x72,375x500 \
                 72x72,459x500 72x72,500x375 72x72,500x375 100x100,500x428 72x72,500x420 \
                 72x72,500x375 1x1,465x500 1x1,254x247 72x72,500x375 72x72,500x500 \
                 72x72,500x333 72x72,500x375 72x72,451x500 72x72,333x500 72x72,500x375 \
                 72x72,500x434 72x72,540x371 1x1,500x375 100x100,332x500 96x96,500x394 \
                 72x72,369x279 100x100,480x360 72x72,500x375 72x72,374x251 72x72,500x375 \
                 72x72,500x375 120x120,383x500 72x72,360x270 1x1,500x400 72x72,500x375 \
                 1x1,500x375 71x71,387x379 240x240,360x500 72x72,240x180 72x72,500x376 \
                 72x72,500x346 72x72,333x500 96x96,250x209 300x300,500x331 300x300,333x500 \
                 72x72,500x378 72x72,500x348 72x72,361x500 72x72,500x375 150x150,240x218 \
                 72x72,640x480 1x1,500x375 200x200,490x275 1x1,333x500 72x72,500x375 \
                 1x1,320x426 72x72,200x319 72x72,240x180 72x72,500x375 72x72,500x375 \
                 100x100,250x250 1x1,500x375 72x72,500x375 96x96,350x387 180x180,500x418 \
                 72x72,375x500 72x72,500x375 72x72,333x500 72x72,564x425 1x1,500x393 \
                 300x300,592x444 150x150,590x904 1x1,375x500 72x72,500x333 100x100,360x360 \
                 500x500,334x500 72x72,304x500 72x72,500x374 72x72,500x375 72x72,300x225 \
                 72x72,389x500 72x72,466x500 72x72,500x375 1x1,500x375 72x72,320x240 \
                 72x72,480x360 1x1,500x334 1x1,333x500 72x72,500x375 72x72,500x375 \
                 72x72,333x500 72x72,500x333 1x1,500x375 72x72,337x255 72x72,500x375 \
                 72x72,500x298 72x72,361x277 72x72,500x375 180x180,500x375 120x120,333x500 \
                 72x72,500x375 96x96,500x375 300x300,480x500 72x72,500x375 72x72,400x337 \
                 72x72,375x500 72x72,500x375 300x300,500x379 72x72,500x333 1x1,334x500 \
                 72x72,500x375 72x72,500x375 1x1,500x375 72x72,500x499 96x96,500x376 \
                 72x72,212x320 72x72,800x677 72x72,500x375 72x72,500x203 1x1,500x375 \
                 72x72,270x360 72x72,500x349 192x192,375x500 600x600,500x306 1x1,500x375 \
                 72x72,500x428 72x72,500x359 72x72,500x375 72x72,500x375 72x72,240x180 \
                 72x72,500x375 72x72,357x500 72x72,500x326 72x72,500x375 72x72,500x379 \
                 150x150,360x303 72x72,300x277 300x300,190x240 1200x1200,500x338 72x72,258x200 \
                 72x72,455x500 300x300,500x430 72x72,500x375 72x72,405x500 72x72,500x375 \
                 72x72,500x281 72x72,500x375 72x72,384x257 72x72,500x379 72x72,361x269 \
                 72x72,500x375 180x180,375x500 72x72,560x427 230x230,500x375 300x300,276x222 \
                 72x72,500x375 72x72,482x500 72x72,500x375 400x400,378x500 1x1,500x375)

val_imageinfo=(72x72,500x375 72x72,500x375 300x300,500x332 72x72,500x375 72x72,500x375 \
               72x72,500x375 72x72,500x333 192x192,375x500 72x72,375x500 72x72,500x375 \
               300x300,426x500 72x72,397x500 72x72,500x375 72x72,500x375 300x300,500x381 \
               72x72,500x375 72x72,500x375 72x72,500x375 72x72,500x375 100x100,533x400 \
               72x72,500x375 72x72,500x334 72x72,500x383 180x180,1600x1200 96x96,389x500 \
               72x72,500x375 72x72,500x390 72x72,500x375 300x300,500x376 72x72,500x375 \
               72x72,500x375 72x72,500x334 72x72,500x375 100x100,240x240 72x72,425x296 \
               72x72,500x375 72x72,500x375 72x72,500x375 72x72,500x375 72x72,500x375 \
               100x100,429x500 72x72,500x413 180x180,489x500 100x100,203x300 300x300,500x389 \
               100x100,196x200 150x150,120x100 100x100,400x294 72x72,500x375 72x72,417x500)


RED='\033[0;31m'
NC='\033[0m'
YELLOW='\033[1;33m'
GREEN='\033[0;32m'

check_imagemagick()
{
    if ! command -v convert &> /dev/null
    then
        echo -e "${RED}ImageMagick tool \"convert\"  could not be found${NC}"
        echo -e "${RED}please install tool with below command${NC}"
        echo -e "${RED}centos/amzn2: sudo yum install ImageMagick${NC}"
        echo -e "${RED}ubuntu: sudo apt install imagemagick${NC}"
        exit 1
    fi
}

usage()
{
    echo -e "${RED}$0 \\ ${NC}"
    echo -e "${RED} -d <outdir> \\ ${NC} # default resnet_synthetic_dataset"
    echo -e "${RED} -n <number of classes> \\ ${NC} # default 1000"
    echo -e "${RED} -v <validation dataset count> \\ ${NC} # default 50"
    echo -e "${RED} -t <training dataset count> ${NC} # default 1300"
    echo  "e.g. $0 -n 160"
}


while [[ $# -gt 0 ]]
do
    arg="$1"

    case $arg in
    -d|--outdir)
        OUTDIR="$2"
        shift
        shift
        ;;
    -n|--num-classes)
        NUMCLASSES="$2"
        shift
        shift
        ;;
    -v|--val-data-count)
        VALDATACNT="$2"
        shift
        shift
        ;;
    -t|--train-data-count)
        TRAINDATACNT="$2"
        shift
        shift
        ;;
    -h|--help)
        usage
        exit 1
        ;;

    *)    # unknown option
        echo "unknown option $arg"
        usage
        echo "e.g.: $0 -d <output dataset dir> -n <number of classes in dataset>"
        exit 1
        ;;
    esac
done

SYNTHETIC_DATA_DIR=${OUTDIR:-resnet_synthetic_dataset}
NUMBER_OF_CLASSES=${NUMCLASSES:-1000}
VALIDATION_IMAGES_PER_CLASS=${VALDATACNT:-50}
TRAINING_IMAGES_PER_CLASS=${TRAINDATACNT:-1300}
TARGET_NUMBER_OF_CLASSES=1000

echo "SYNTHETIC_DATA_DIR          = ${SYNTHETIC_DATA_DIR}"
echo "NUMBER_OF_CLASSES           = ${NUMBER_OF_CLASSES}"
echo "VALIDATION_IMAGES_PER_CLASS = ${VALIDATION_IMAGES_PER_CLASS}"
echo "TRAINING_IMAGES_PER_CLASS   = ${TRAINING_IMAGES_PER_CLASS}"

TMPDIR=$(pwd)/synthetic_data

generate_synthetic_data()
{
    dataset_type=$1
    dstdir=$2
    num_classes=$3
    images_per_class=$4
    imageinfo=()
    if [ ${dataset_type}  == "train" ]; then
        imageinfo=("${train_imageinfo[@]}")
    else
        imageinfo=("${val_imageinfo[@]}")
    fi
    output_dir=${dstdir}/${dataset_type}
    num_images=${#imageinfo[@]}
    mkdir -p ${dstdir}
    echo -e "${GREEN}[datasettype:${dataset_type}] path: $(realpath ${output_dir})${NC}"
    for dircount in `seq ${num_classes}`
    do
        TMPDSTDIR="${output_dir}/${dircount}"
        if [ ! -d ${TMPDSTDIR} ]; then
            mkdir -p ${TMPDSTDIR}
        else
            echo -e "${RED}[class:${dircount}]${TMPDSTDIR} already exists!!${NC}"
        fi
        for filecount in `seq ${images_per_class}`
        do
            random_idx=$(( RANDOM % num_images ))
            __img_info=${imageinfo[random_idx]}
            density="$(echo ${__img_info} | awk '{print $1}' FS=',')"
            xy="$(echo ${__img_info} | awk '{print $2}' FS=',')"
            mx=$(echo ${xy} | awk '{ print $1 }' FS='x')
            my=$(echo ${xy} | awk '{ print $2 }' FS='x')
            outfile=${TMPDSTDIR}/${filecount}.jpg
            head -c "$((3*mx*my))" /dev/urandom | convert -depth 8 \
                -density ${density} -units PixelsPerInch \
                -size  "${mx}x${my}" RGB:- ${outfile}
            if [ $? -ne 0 ]; then
                echo -e "${RED}failed for ${fl}, outfile=${outfile}${NC}"
            fi
        done
        __cnt=$(ls -1 ${TMPDSTDIR} | wc -l)
        echo -e "${GREEN}[class:${dircount}] images generated ${TMPDSTDIR} ${__cnt}${NC}"
    done
    for dircount in `seq ${num_classes} ${TARGET_NUMBER_OF_CLASSES}`
    do
        srcdir=$((dircount%num_classes))
        srcdir=$((srcdir+1))
        ln -rs ${output_dir}/${srcdir} ${output_dir}/${dircount}
    done
    __cnt=$(ls -1 ${output_dir} | wc -l)
    echo -e "${GREEN}[class:${dircount}] classes ${output_dir} ${__cnt}${NC}"
}
check_imagemagick
generate_synthetic_data "val" ${SYNTHETIC_DATA_DIR} ${NUMBER_OF_CLASSES} ${VALIDATION_IMAGES_PER_CLASS}
generate_synthetic_data "train" ${SYNTHETIC_DATA_DIR} ${NUMBER_OF_CLASSES} ${TRAINING_IMAGES_PER_CLASS}
exit 0
