#!/bin/bash

HOME_DIR=/test
BIN_DIR=${HOME_DIR}/bin
LOG_DIR=${HOME_DIR}/logs

DGL_RELEASE_TAG=$(python -c "import dgl; dgl_versions = dgl.__version__.split('.'); print(f'{dgl_versions[0]}.{dgl_versions[1]}.x')")

if [[ DGL_RELEASE_TAG == "0.4.x"]]; then
    git clone -b ${DGL_RELEASE_TAG} https://github.com/dmlc/dgl.git ${HOME_DIR}/artifacts/dgl 
else
  git clone -b 0.5.x https://github.com/dmlc/dgl.git ${HOME_DIR}/artifacts/dgl
fi 
${BIN_DIR}/dgl_tests/testDGLHelper python pytorch || exit 1

exit 0
